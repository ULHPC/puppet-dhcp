################################################################################
# dhcpd.conf -  Configuration file for the DHCP server
#                  _ _                    _                   __
#               __| | |__   ___ _ __   __| |  ___ ___  _ __  / _|
#              / _` | '_ \ / __| '_ \ / _` | / __/ _ \| '_ \| |_
#             | (_| | | | | (__| |_) | (_| || (_| (_) | | | |  _|
#              \__,_|_| |_|\___| .__/ \__,_(_)___\___/|_| |_|_|
#                              |_|
#
################################################################################
# /!\ DO NOT EDIT THIS FILE: It has been automatically generated by Puppet.    #
#   In particular, any further changes will be overwritten at the next puppet  #
#   invocation                                                                 #
################################################################################

DHCPD_INTERFACE="eth0" ; # Interface where dhcpd is active
use-host-decl-names on;  # the name provided for fixed @ attribution is the client hostname
#log-facility local7;    # facility to handle the logfiles - complementary config in /etc/syslog.conf

# The ddns-updates-style parameter controls whether or not the server will
# attempt to do a DNS update when a lease is confirmed. We default to the
# behavior of the version 2 packages ('none', since DHCP v2 didn't
# have support for DDNS.)
ddns-update-style none;

### Lease properties
# option definitions common to all supported networks...
default-lease-time      28800;
max-lease-time          86400;

### Response control
# specific boot options
allow booting;
allow bootp;
deny unknown-clients;

option dhcp-max-message-size 2048;

# #################### PXE statements ####################
# # Code 1: Multicast IP address of bootfile
# # Code 2: UDP port that client should monitor for MTFTP responses
# # Code 3: UDP port that MTFTP servers are using to listen for MTFTP requests
# # Code 4: Number of secondes a client must listen for activity before trying
# #         to start a new MTFTP transfer
# # Code 5: Number of sxecondes a client must listen before trying to restart
# #         a MTFTP transfer
# #
# # Options for the 'PXE' class
# option space PXE;
# option PXE.mtftp-ip code 1 = ip-address;
# option PXE.mtftp-cport code 2 = unsigned integer 16;
# option PXE.mtftp-sport code 3 = unsigned integer 16;
# option PXE.mtftp-tmout code 4 = unsigned integer 8;
# option PXE.mtftp-delay code 5 = unsigned integer 8;
# option PXE.discovery-control code 6 = unsigned integer 8;
# option PXE.discovery-mcast-addr code 7 = ip-address;

# # 'pxelinux' options
# option space pxelinux;
# option pxelinux.magic      code 208 = string;
# option pxelinux.configfile code 209 = text;
# option pxelinux.pathprefix code 210 = text;
# option pxelinux.reboottime code 211 = unsigned integer 32;
# site-option-space "pxelinux";
# option pxelinux.magic f1:00:74:7e;
# option pxelinux.reboottime 30;

# # 'PXE' class
# class "PXE" {
#   match if substring(option vendor-class-identifier, 0, 9) = "PXEClient";
#   filename "pxelinux.0";
#   option vendor-class-identifier "PXEClient";
#   vendor-option-space PXE;
#   option PXE.mtftp-ip 0.0.0.0;
# }

shared-network "default_network" {

    #  Prod network (10.0.0.0/8)
    subnet 10.0.0.0 netmask 255.255.0.0 {
        option      domain-name         "example.com";
        option      domain-name-servers 10.0.0.1, 10.0.0.2; # Default DNS
        option      ntp-servers         10.0.0.3, 10.0.0.4; # NTP servers
        option      subnet-mask         255.255.0.0;              # Default subnet mask
        option      broadcast-address   10.0.255.255;          # Default broadcast adress
        option      routers             10.0.0.254;            # Default gateway

        # Host address of the server from which the initial boot file
        # (specified in the filename statement) is to be loaded.
        # FAI server
        next-server 10.0.1.5;
        filename    "pxelinux.0";
    }

    ########################################################
    # Host declarations on 'Prod' network (10.0.0.0/8) #
    ########################################################
    group {

        host newserver {
            hardware ethernet 00:25:90:50:60:0c;
            fixed-address     10.0.1.100;
        }

    } # End group host of the 'Prod' network


}
