################################################################################
# dhcpd.conf -  Configuration file for the DHCP server for <%= site %>
#                  _ _                    _                   __
#               __| | |__   ___ _ __   __| |  ___ ___  _ __  / _|
#              / _` | '_ \ / __| '_ \ / _` | / __/ _ \| '_ \| |_
#             | (_| | | | | (__| |_) | (_| || (_| (_) | | | |  _|
#              \__,_|_| |_|\___| .__/ \__,_(_)___\___/|_| |_|_|
#                              |_|
#
################################################################################
# /!\ DO NOT EDIT THIS FILE: It has been automatically generated by Puppet.    #
#   In particular, any further changes will be overwritten at the next puppet  #
#   invocation                                                                 #
################################################################################

DHCPD_INTERFACE="eth0 eth1" ;   # Interface where dhcpd is active
use-host-decl-names on; # the name provided for fixed @ attribution is the client hostname
#log-facility local7;   # facility to handle the logfiles - complementary config in /etc/syslog.conf

# The ddns-updates-style parameter controls whether or not the server will
# attempt to do a DNS update when a lease is confirmed. We default to the
# behavior of the version 2 packages ('none', since DHCP v2 didn't
# have support for DDNS.)
ddns-update-style none;

### Lease properties
# option definitions common to all supported networks...
default-lease-time      28800;
max-lease-time          86400;

### Response control
# specific boot options
allow booting;
allow bootp;
deny unknown-clients;

option dhcp-max-message-size 2048;

# #################### PXE statements ####################
# # Code 1: Multicast IP address of bootfile
# # Code 2: UDP port that client should monitor for MTFTP responses
# # Code 3: UDP port that MTFTP servers are using to listen for MTFTP requests
# # Code 4: Number of secondes a client must listen for activity before trying
# #         to start a new MTFTP transfer
# # Code 5: Number of sxecondes a client must listen before trying to restart
# #         a MTFTP transfer
# #
# # Options for the 'PXE' class
# option space PXE;
# option PXE.mtftp-ip code 1 = ip-address;
# option PXE.mtftp-cport code 2 = unsigned integer 16;
# option PXE.mtftp-sport code 3 = unsigned integer 16;
# option PXE.mtftp-tmout code 4 = unsigned integer 8;
# option PXE.mtftp-delay code 5 = unsigned integer 8;
# option PXE.discovery-control code 6 = unsigned integer 8;
# option PXE.discovery-mcast-addr code 7 = ip-address;

# # 'pxelinux' options
# option space pxelinux;
# option pxelinux.magic      code 208 = string;
# option pxelinux.configfile code 209 = text;
# option pxelinux.pathprefix code 210 = text;
# option pxelinux.reboottime code 211 = unsigned integer 32;
# site-option-space "pxelinux";
# option pxelinux.magic f1:00:74:7e;
# option pxelinux.reboottime 30;

# # 'PXE' class
# class "PXE" {
#   match if substring(option vendor-class-identifier, 0, 9) = "PXEClient";
#   filename "pxelinux.0";
#   option vendor-class-identifier "PXEClient";
#   vendor-option-space PXE;
#   option PXE.mtftp-ip 0.0.0.0;
# }



shared-network "chaos_cluster_network" {
    ####################
    # Virtual Networks #
    ####################
    #  Prod network (10.221.0.0/16) - VLAN 145
    subnet 10.221.0.0 netmask 255.255.0.0 {
        option      domain-name         "chaos-cluster.uni.lux";
        option      domain-name-servers 10.221.251.2;    # Default DNS
        option      ntp-servers         10.221.250.5, 10.226.250.5 ; # NTP servers
        option      subnet-mask         255.255.0.0;     # Default subnet mask
        option      broadcast-address   10.221.255.255;  # Default broadcast adress
        option      routers             10.221.0.1;      # Default gateway

        # Host address of the server from which the initial boot file
        # (specified in the filename statement) is to be loaded.
        # FAI server
        next-server 10.221.251.3;
        filename    "pxelinux.0";
    }

    #  Mgmt network (10.222.0.0/16) - VLAN 142
    subnet 10.222.0.0 netmask 255.255.0.0 {
        option      domain-name         "chaos-cluster.uni.lux";
        option      domain-name-servers 10.222.251.2;    # Default DNS
        option      ntp-servers         10.221.250.5, 10.226.250.5 ; # NTP servers
        option      subnet-mask         255.255.0.0;     # Default subnet mask
        option      broadcast-address   10.222.255.255;  # Default broadcast adress
        option      routers             10.222.0.1;      # Default gateway
    }

    ##################################################################
    # Host declarations on 'Prod' network (10.221.0.0/16) - VLAN 145 #
    ##################################################################
    group {

        ############## h-nodes ################
        # aka new HP blade enclosure
        host h-cluster1-1 { # 1A
                hardware ethernet F4:CE:46:82:55:D6; # NIC1
                                                     # NIC2: F4:CE:46:82:55:D7
                fixed-address h-cluster1-1;
        }
        host h-cluster1-2 { # 1B
                hardware ethernet F4:CE:46:BE:3E:C2; # NIC1
                                                     # NIC2: F4:CE:46:BE:3E:C3
                fixed-address h-cluster1-2;
        }
        host h-cluster1-3 { # 2A
                hardware ethernet F4:CE:46:80:8F:26; # NIC1
                                                     # NIC2: F4:CE:46:80:8F:27
                fixed-address h-cluster1-3;
        }
        host h-cluster1-4 { # 2B
                hardware ethernet 18:A9:05:75:F1:DA; # NIC1
                                                     # NIC2: 18:A9:05:75:F1:DB
                fixed-address h-cluster1-4;
        }
        host h-cluster1-5 { # 3A
                hardware ethernet F4:CE:46:BE:5B:0E; # NIC1
                                                     # NIC2: F4:CE:46:BE:5B:0F
                fixed-address h-cluster1-5;
        }
        host h-cluster1-6 { # 3B
                hardware ethernet F4:CE:46:87:9D:88; # NIC1
                                                     # NIC2: F4:CE:46:87:9D:89
                fixed-address h-cluster1-6;
        }
        host h-cluster1-7 { # 4A
                hardware ethernet F4:CE:46:BE:2C:6E; # NIC1
                                                     # NIC2: F4:CE:46:BE:2C:6F
                fixed-address h-cluster1-7;
        }
        host h-cluster1-8 { # 4B
                hardware ethernet F4:CE:46:82:D4:AA; # NIC1
                                                     # NIC2: F4:CE:46:82:D4:AB
                fixed-address h-cluster1-8;
        }
        host h-cluster1-9 { # 5A
                hardware ethernet F4:CE:46:B6:BB:8E; # NIC1
                                                     # NIC2: F4:CE:46:B6:BB:8F
                fixed-address h-cluster1-9;
        }
        host h-cluster1-10 { # 5B
                hardware ethernet F4:CE:46:82:F7:A6; # NIC1
                                                     # NIC2: F4:CE:46:82:F7:A7
                fixed-address h-cluster1-10;
        }
        host h-cluster1-11 { # 6A
                hardware ethernet F4:CE:46:BE:4B:C4; # NIC1
                                                     # NIC2: F4:CE:46:BE:4B:C5
                fixed-address h-cluster1-11;
        }
        host h-cluster1-12 { # 6B
                hardware ethernet F4:CE:46:87:7D:F2; # NIC1
                                                     # NIC2: F4:CE:46:87:7D:F3
                fixed-address h-cluster1-12;
        }
        host h-cluster1-13 { # 7A
                hardware ethernet F4:CE:46:BE:3C:0A; # NIC1
                                                     # NIC2: F4:CE:46:BE:3C:0B
                fixed-address h-cluster1-13;
        }
        host h-cluster1-14 { # 7B
                hardware ethernet F4:CE:46:87:9D:46; # NIC1
                                                     # NIC2: F4:CE:46:87:9D:47
                fixed-address h-cluster1-14;
        }
        host h-cluster1-15 { # 8A
                hardware ethernet F4:CE:46:BE:1C:AE; # NIC1
                                                     # NIC2: F4:CE:46:BE:1C:AF
                fixed-address h-cluster1-15;
        }
        host h-cluster1-16 { # 8B
                hardware ethernet F4:CE:46:87:9D:04; # NIC1
                                                     # NIC2: F4:CE:46:87:9D:05
                fixed-address h-cluster1-16;
        }
        host h-cluster1-17 { # 9A
                hardware ethernet F4:CE:46:B6:BB:70; # NIC1
                                                     # NIC2: F4:CE:46:B6:BB:71
                fixed-address h-cluster1-17;
        }
        host h-cluster1-18 { # 9B
                hardware ethernet D8:D3:85:5B:FF:6A; # NIC1
                                                     # NIC2: D8:D3:85:5B:FF:6B
                fixed-address h-cluster1-18;
        }
        host h-cluster1-19 { # 10A
                hardware ethernet F4:CE:46:82:B7:24; # NIC1
                                                     # NIC2: F4:CE:46:82:B7:25
                fixed-address h-cluster1-19;
        }
        host h-cluster1-20 { # 10B
                hardware ethernet F4:CE:46:87:9D:3E; # NIC1
                                                     # NIC2:    F4:CE:46:87:9D:3F
                fixed-address h-cluster1-20;
        }
        host h-cluster1-21 { # 11A
                hardware ethernet F4:CE:46:B6:BB:88; # NIC1
                                                     # NIC2: F4:CE:46:B6:BB:89
                fixed-address h-cluster1-21;
        }
        host h-cluster1-22 { # 11B
                hardware ethernet F4:CE:46:87:BD:0C; # NIC1
                                                     # NIC2: F4:CE:46:87:BD:0D
                fixed-address h-cluster1-22;
        }
        host h-cluster1-23 { # 12A
                hardware ethernet F4:CE:46:BE:1C:78; # NIC1
                                                     # NIC2: F4:CE:46:BE:1C:79
                fixed-address h-cluster1-23;
        }
        host h-cluster1-24 { # 12B
                hardware ethernet F4:CE:46:87:7D:E2; # NIC1
                                                     # NIC2: F4:CE:46:87:7D:E3
                fixed-address h-cluster1-24;
        }
        host h-cluster1-25 { # 13A
                hardware ethernet F4:CE:46:BE:2C:8A; # NIC1
                                                     # NIC2: F4:CE:46:BE:2C:8B
                fixed-address h-cluster1-25;
        }
        host h-cluster1-26 { # 13B
                hardware ethernet F4:CE:46:87:7D:9C; # NIC1
                                                     # NIC2: F4:CE:46:87:7D:9D
                fixed-address h-cluster1-26;
        }
        host h-cluster1-27 { # 14A
                hardware ethernet F4:CE:46:BE:1C:70; # NIC1
                                                     # NIC2: F4:CE:46:BE:1C:71
                fixed-address h-cluster1-27;
        }
        host h-cluster1-28 { # 14B
                hardware ethernet F4:CE:46:B3:79:6C; # NIC1
                                                     # NIC2: F4:CE:46:B3:79:6D
                fixed-address h-cluster1-28;
        }
        host h-cluster1-29 { # 15A
                hardware ethernet F4:CE:46:BE:0C:48; # NIC1
                                                     # NIC2: F4:CE:46:BE:0C:49
                fixed-address h-cluster1-29;
        }
        host h-cluster1-30 { # 15B
                hardware ethernet F4:CE:46:87:AD:2E; # NIC1
                                                     # NIC2: F4:CE:46:87:AD:2F
                fixed-address h-cluster1-30;
        }
        host h-cluster1-31 { # 16A
                hardware ethernet F4:CE:46:B5:5C:8E; # NIC1
                                                     # NIC2: F4:CE:46:B5:5C:8F
                fixed-address h-cluster1-31;
        }
        host h-cluster1-32 { # 16B
                hardware ethernet F4:CE:46:80:BF:98; # NIC1
                                                     # NIC2: F4:CE:46:80:BF:99
                fixed-address h-cluster1-32;
        }

        ############## d-nodes ################
        # aka Dell M1000 blade enclosure, containing 16xM610
        host d-cluster1-1 {
                hardware ethernet 5C:26:0A:FC:4B:14;    # NIC 1
                # NIC 2: 5C:26:0A:FC:4B:16
                fixed-address d-cluster1-1;
        }
        host d-cluster1-2 {
                hardware ethernet 5C:26:0A:FC:4C:98;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4C:9A
                fixed-address d-cluster1-2;
        }
        host d-cluster1-3 {
                hardware ethernet 5C:26:0A:FC:4C:DC;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4C:DE
                fixed-address d-cluster1-3;
        }
        host d-cluster1-4 {
                hardware ethernet 5C:26:0A:FC:4B:E4;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4B:E6
                fixed-address d-cluster1-4;
        }
        host d-cluster1-5 {
                hardware ethernet 5C:26:0A:FC:4C:94;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4C:96
                fixed-address d-cluster1-5;
        }
        host d-cluster1-6 {
                hardware ethernet 5C:26:0A:FC:6D:38;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:6D:3A
                fixed-address d-cluster1-6;
        }
        host d-cluster1-7 {
                hardware ethernet 5C:26:0A:FC:47:F4;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:47:F6
                fixed-address d-cluster1-7;
        }
        host d-cluster1-8 {
                hardware ethernet 5C:26:0A:FC:5C:CC;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:5C:CE
                fixed-address d-cluster1-8;
        }
        host d-cluster1-9 {
                hardware ethernet 5C:26:0A:FC:4A:24;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4A:26
                fixed-address d-cluster1-9;
        }
        host d-cluster1-10 {
                hardware ethernet 5C:26:0A:FC:4C:C8;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4C:CA
                fixed-address d-cluster1-10;
        }
        host d-cluster1-11 {
                hardware ethernet 5C:26:0A:FC:43:BC;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:43:BE
                fixed-address d-cluster1-11;
        }
        host d-cluster1-12 {
                hardware ethernet 5C:26:0A:FC:3D:F8;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:3D:FA
                fixed-address d-cluster1-12;
        }
        host d-cluster1-13 {
                hardware ethernet 5C:26:0A:FC:4C:CC;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:4C:CE
                fixed-address d-cluster1-13;
        }
        host d-cluster1-14 {
                hardware ethernet 5C:26:0A:FC:3D:D8;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:3D:DA
                fixed-address d-cluster1-14;
        }
        host d-cluster1-15 {
                hardware ethernet 5C:26:0A:FC:3F:00;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:3F:02
                fixed-address d-cluster1-15;
        }
        host d-cluster1-16 {
                hardware ethernet 5C:26:0A:FC:43:C0;    # NIC 1
                                                        # NIC 2: 5C:26:0A:FC:43:C2
                fixed-address d-cluster1-16;
        }

        ############## r-nodes ################
        # aka Dell node with 1TB RAM
        host r-cluster1-1 {
                hardware ethernet 84:2b:2b:6c:9e:b7;    # NIC 1
                                                        # NIC 2: 84:2b:2b:6c:9e:b9
                                                        # NIC 3: 84:2b:2b:6c:9e:bb
                                                        # NIC 4: 84:2b:2b:6c:9e:bd
                fixed-address r-cluster1-1;
        }

        ############## e-nodes ################
        # aka Dell M1000 blade enclosure, containing 16xM620
        host e-cluster1-1 {
            hardware ethernet 00:13:72:3B:89:B2;
            fixed-address e-cluster1-1;
        }
        host e-cluster1-2 {
            hardware ethernet 00:14:22:7C:B8:69;
            fixed-address e-cluster1-2;
        }
        host e-cluster1-3 {
            hardware ethernet 00:14:22:7C:B7:A6;
            fixed-address e-cluster1-3;
        }
        host e-cluster1-4 {
            hardware ethernet 00:13:72:3B:87:C3;
            fixed-address e-cluster1-4;
        }
        host e-cluster1-5 {
            hardware ethernet 00:13:72:3B:87:63;
            fixed-address e-cluster1-5;
        }
        host e-cluster1-6 {
            hardware ethernet 00:14:22:7C:B4:64;
            fixed-address e-cluster1-6;
        }
        host e-cluster1-7 {
            hardware ethernet 00:14:22:7C:B4:13;
            fixed-address e-cluster1-7;
        }
        host e-cluster1-8 {
            hardware ethernet 00:14:22:7C:B7:97;
            fixed-address e-cluster1-8;
        }
        host e-cluster1-9 {
            hardware ethernet 00:14:22:7C:18:F7;
            fixed-address e-cluster1-9;
        }
        host e-cluster1-10 {
            hardware ethernet 00:14:22:7C:B7:07;
            fixed-address e-cluster1-10;
        }
        host e-cluster1-11 {
            hardware ethernet 00:13:72:3B:8A:03;
            fixed-address e-cluster1-11;
        }
        host e-cluster1-12 {
            hardware ethernet 00:14:22:7C:13:1B;
            fixed-address e-cluster1-12;
        }
        host e-cluster1-13 {
            hardware ethernet 00:14:22:7C:B5:FC;
            fixed-address e-cluster1-13;
        }
        host e-cluster1-14 {
            hardware ethernet 00:13:72:3B:89:EE;
            fixed-address e-cluster1-14;
        }
        host e-cluster1-15 {
            hardware ethernet 00:13:72:3B:85:9E;
            fixed-address e-cluster1-15;
        }
        host e-cluster1-16 {
            hardware ethernet 00:14:22:7C:B7:28;
            fixed-address e-cluster1-16;
        }


        ############## s-nodes ################
        # aka new HP SL nodes
        host s-cluster1-1 {
            hardware ethernet 00:9c:02:ab:c8:4c;
            fixed-address s-cluster1-1;
        }
        host s-cluster1-2 {
            hardware ethernet 00:9c:02:ab:c7:e8;
            fixed-address s-cluster1-2;
        }
        host s-cluster1-3 {
            hardware ethernet 00:9c:02:ab:c8:1c;
            fixed-address s-cluster1-3;
        }
        host s-cluster1-4 {
            hardware ethernet 00:9c:02:ab:c7:c0;
            fixed-address s-cluster1-4;
        }
        host s-cluster1-5 {
            hardware ethernet 00:9c:02:ab:c7:d8;
            fixed-address s-cluster1-5;
        }
        host s-cluster1-6 {
            hardware ethernet 00:9c:02:ab:c8:44;
            fixed-address s-cluster1-6;
        }
        host s-cluster1-7 {
            hardware ethernet 00:9c:02:ab:c8:10;
            fixed-address s-cluster1-7;
        }
        host s-cluster1-8 {
            hardware ethernet 00:9c:02:ab:c8:98;
            fixed-address s-cluster1-8;
        }
        host s-cluster1-9 {
            hardware ethernet 00:9c:02:ab:c7:f0;
            fixed-address s-cluster1-9;
        }
        host s-cluster1-10 {
            hardware ethernet 00:9c:02:ab:c7:88;
            fixed-address s-cluster1-10;
        }
        host s-cluster1-11 {
            hardware ethernet 00:9c:02:ab:c8:3c;
            fixed-address s-cluster1-11;
        }
        host s-cluster1-12 {
            hardware ethernet 00:9c:02:ab:c7:98;
            fixed-address s-cluster1-12;
        }
        host s-cluster1-13 {
            hardware ethernet 00:9c:02:ab:cf:94;
            fixed-address s-cluster1-13;
        }
        host s-cluster1-14 {
            hardware ethernet 00:9c:02:aa:b0:70;
            fixed-address s-cluster1-14;
        }
        host s-cluster1-15 {
            hardware ethernet 00:9c:02:ab:cb:84;
            fixed-address s-cluster1-15;
        }
        host s-cluster1-16 {
            hardware ethernet 00:9c:02:ab:cf:8c;
            fixed-address s-cluster1-16;
        }

    } # End group host of the "Prod" network


    ##################################################################
    # Host declarations on 'Mgmt' network (10.222.0.0/16) - VLAN 142 #
    # These corresponds to BMC cards
    ##################################################################
    group {

        host access-bmc {
            hardware ethernet 00:25:90:6f:3b:d1;
            fixed-address access-bmc;
        }
        host cartman-bmc {
            hardware ethernet 00:25:90:9d:00:1f;
            fixed-address cartman-bmc;
        }
        host e-cluster1-encl {
            hardware ethernet 90:b1:1c:07:52:6f;
            fixed-address e-cluster1-encl;
        }
        host s-cluster1-1-bmc {
            hardware ethernet 00:9c:02:ab:c8:4e;
            fixed-address s-cluster1-1-bmc;
        }
        host s-cluster1-2-bmc {
            hardware ethernet 00:9c:02:ab:c7:ea;
            fixed-address s-cluster1-2-bmc;
        }
        host s-cluster1-3-bmc {
            hardware ethernet 00:9c:02:ab:c8:1e;
            fixed-address s-cluster1-3-bmc;
        }
        host s-cluster1-4-bmc {
            hardware ethernet 00:9c:02:ab:c7:c2;
            fixed-address s-cluster1-4-bmc;
        }
        host s-cluster1-5-bmc {
            hardware ethernet 00:9c:02:ab:c7:da;
            fixed-address s-cluster1-5-bmc;
        }
        host s-cluster1-6-bmc {
            hardware ethernet 00:9c:02:ab:c8:46;
            fixed-address s-cluster1-6-bmc;
        }
        host s-cluster1-7-bmc {
            hardware ethernet 00:9c:02:ab:c8:12;
            fixed-address s-cluster1-7-bmc;
        }
        host s-cluster1-8-bmc {
            hardware ethernet 00:9c:02:ab:c8:9a;
            fixed-address s-cluster1-8-bmc;
        }
        host s-cluster1-9-bmc {
            hardware ethernet 00:9c:02:ab:c7:f2;
            fixed-address s-cluster1-9-bmc;
        }
        host s-cluster1-10-bmc {
            hardware ethernet 00:9c:02:ab:c7:8a;
            fixed-address s-cluster1-10-bmc;
        }
        host s-cluster1-11-bmc {
            hardware ethernet 00:9c:02:ab:c8:3e;
            fixed-address s-cluster1-11-bmc;
        }
        host s-cluster1-12-bmc {
            hardware ethernet 00:9c:02:ab:c7:9a;
            fixed-address s-cluster1-12-bmc;
        }
        host s-cluster1-13-bmc {
            hardware ethernet 00:9c:02:ab:cf:96;
            fixed-address s-cluster1-13-bmc;
        }
        host s-cluster1-14-bmc {
            hardware ethernet 00:9c:02:aa:b0:72;
            fixed-address s-cluster1-14-bmc;
        }
        host s-cluster1-15-bmc {
            hardware ethernet 00:9c:02:ab:cb:86;
            fixed-address s-cluster1-15-bmc;
        }
        host s-cluster1-16-bmc {
            hardware ethernet 00:9c:02:ab:cf:8e;
            fixed-address s-cluster1-16-bmc;
        }
    } # End group host of the 'Mgmt' network


}
